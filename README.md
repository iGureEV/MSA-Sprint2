# MSA-Sprint2

Проект из второго спринта курса "Микросервисная архитектура" на Яндекс.Практикум 08.12 - 21.12 МД.

## Задачи и их решения
[Задание 1. Проработка миграции от монолита к микросервисам](tasks/task1)  
[Задание 2. Реализация новых сервисов](tasks/task2)  
[Задание 3. Личный кабинет](tasks/task3)  
[Задание 4. Автоматизация развёртывания и тестирования](tasks/task4)  
[Задание 5. Настройка управления трафиком с Istio](tasks/task5)   

## О компании

Hotelio — онлайн-платформа для бронирования отелей и апартаментов. У неё около 1 млн зарегистрированных пользователей и основной трафик приходится на поиск и бронирование жилья. Система построена на Java-монолите, который обеспечивает API для клиентов и партнёрских каналов.

## Проблематика

Сервис Hotelio реализован как единое приложение, в котором все бизнес-функции собраны в одном коде, разворачиваются как единый сервис и используют одну базу данных.
С ростом бизнеса возникли серьёзные архитектурные и операционные проблемы. Команда приняла решение о переходе на микросервисную архитектуру с постепенным выносом сервисов.

## Текущие проблемы
- Сложность сопровождения
  - Любое изменение требует понимания всей кодовой базы.
  - Невозможно менять один модуль, не затрагивая другие.
- Низкая масштабируемость
  - При пиковых нагрузках (например, на бронирование) нельзя масштабировать только нужный компонент.
  - Производительность неравномерна.
- Невозможность гибкой разработки
  - Разные команды не могут работать независимо.
  - Трудно внедрить быстрый CI/CD.
- Ограничения на фронтенде
  - REST API монолита слишком универсален и плохо адаптируется под разные платформы.
  - Нет поддержки BFF.
- Сложности с запуском новых фич
  - Большой риск ошибок из-за плотной связанности.
  - Тестирование требует понимания всех зависимостей.

В работе детально проанализирована архитектура системы и выделены наиболее критичные проблемы.

## Лендскейп компании

Структура IT-отдела:
- два разработчика на Java;
- архитектор, который в том числе пишет код;
- фронтенд-разработчик;
- DevOps-инженер;
- тестировщик;
- продукт-менеджер.
Текущая инфраструктура
- Java Spring Boot (монолит и сервисы);
- PostgreSQL;
- Kafka;
- Docker.

## Назначение модулей:
- BookingService  
  Обрабатывает создание бронирований. Выполняет все проверки: пользователя, отеля, промокода, отзывов. Вычисляет финальную цену, скидку и сохраняет результат.
- UserService  
  Проверяет статус пользователя: активен ли он, не находится ли в чёрном списке. И возвращает его статус.
- HotelService  
  Предоставляет информацию об отелях. Используется для валидации бронирования и отображения информации в интерфейсе.
- PromoCodeService  
  Проверяет промокоды: действительность, применимость к конкретному пользователю.
- ReviewService  
  Отвечает за отзывы и рейтинг отеля. Влияет на возможность бронирования, если у отеля плохая репутация.

## Цели бизнеса
Начать поэтапный переход к микросервисной архитектуре, применяя паттерн Strangler Fig, — выносить по одному компоненту, оставляя остальной функционал в монолите. Это позволит упростить масштабирование, снизить время выхода фич, повысить отказоустойчивость и упростить независимую разработку разных команд.  
Финальное целевое состояние через год:
- Полный переход на микросервисную архитектуру.
- Service mesh с автоматизированными rollouts.
- Масштабируемая Kafka-инфраструктура.
- Метрики и трассировка на каждый сервис.
- GraphQL для фронтенда.

## Задача выполняемая в проекте
Проектирование изменений в ближайшей перспективе. А именно промежуточное состояние через пару месяцев:
- Мигрировано несколько сервисов.
- Старые сервисы не дорабатываются.
- Новая функциональность пишется только уже в мигрированных сервисах.
- Начато разделение баз для балансировки нагрузки и переезда в облако.

Для работы над заданиями заявлены:
- Docker Compose
- IDE
- PlantUML


